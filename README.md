# base64

Searching the web for a base64 implementation yields many results.  The first hit as of 2016-12-10 for "c++ base64" are:

 - http://www.adp-gmbh.ch/cpp/common/base64.html (René Nyffenegger's implementation which is often quoted by other implementations)
 - http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c which is a stackoverflow entry with multiple "here is my implementation which I think is better"
 - http://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c which holds more code snippets
 - http://libb64.sourceforge.net/ which is an opensource implementation claiming to be fast
 
Looking further, we find many more:

 - http://web.mit.edu/freebsd/head/contrib/wpa/src/utils/base64.c from Jouni Malinen under BSD license
 - https://en.wikibooks.org/wiki/Algorithm_Implementation/Miscellaneous/Base64 has both a C and C++ implementations
 
 
 
 
How does one chose?
This project aims at collecting and comparing the different implementations available.
 
Feel free to improve this test or to submit new implementations! 

## Compared implementations
### adp-gmbh (René Nyffenegger)
From http://www.adp-gmbh.ch/cpp/common/base64.html

### lib64
From https://sourceforge.net/projects/libb64/
 
### libcurl (https://sourceforge.net/projects/libb64/)
From https://curl.haxx.se/libcurl/
 
### Internet Software Consortium
From https://opensource.apple.com/source/basic_cmds/basic_cmds-55/uuencode/base64.c
 
### Arduino-Base64
From https://github.com/adamvr/arduino-base64 from BuLogic's fork (https://github.com/BuLogics/libb64)
 
### LihO
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c

### Manuel Martinez
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c

### DaedalusAlpha
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c

### Elegant Dice
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c
 
### polfosol
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c

### omnifarious
From stackoverflow thread at http://stackoverflow.com/questions/5288076/doing-base64-encoding-and-decoding-in-openssl-c

** Note that although this implementation is in the results, it does not produce valid results - including extra '=' padding when not necessary.

### user152949
From stackoverflow thread at http://stackoverflow.com/questions/180947/base64-decode-snippet-in-c

### jounimalinen
From http://web.mit.edu/freebsd/head/contrib/wpa/src/utils/base64.c

### test_wikibooks_org_c
From https://en.wikibooks.org/wiki/Algorithm_Implementation/Miscellaneous/Base64

### test_wikibooks_org_cpp
From https://en.wikibooks.org/wiki/Algorithm_Implementation/Miscellaneous/Base64

### apache
Which I think was based on Rob McCool's uuencode's implementation in 1993
https://opensource.apple.com/source/QuickTimeStreamingServer/QuickTimeStreamingServer-452/CommonUtilitiesLib/base64.c

# Results (32bit Visual Studio 2015)
The table below shows the number of microseconds for the encoding of different buffer sizes:

| Implementation | 1| 2| 3| 4| 5| 6| 7| 8| 9| 10| 11| 12| 13| 14| 15| 16| 17| 18| 19| 20| 21| 22| 23| 24| 25| 26| 27| 28| 29| 30| 31| 32| 33| 34| 35| 36| 37| 38| 39| 40| 41| 42| 43| 44| 45| 46| 47| 48| 49| 50| 51| 52| 53| 54| 55| 56| 57| 58| 59| 60| 61| 62| 63| 64| 68| 72| 76| 80| 96| 112| 128| 160| 192| 224| 256|
|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|
| LihO| 0.130687| 0.13105| 0.130879| 0.170491| 0.173095| 0.171144| 0.213265| 0.216099| 0.216591| 0.365229| 0.362222| 0.362025| 0.405067| 0.405254| 0.400739| 0.442046| 0.444791| 0.44322| 0.484267| 0.484425| 0.482411| 0.62536| 0.629849| 0.63546| 0.670407| 0.671423| 0.669709| 0.711176| 0.712277| 0.714598| 0.750332| 0.752848| 0.763205| 0.902804| 0.901538| 0.906229| 0.943216| 0.943124| 0.943213| 0.984215| 0.988478| 1.00067| 1.03362| 1.03353| 1.04429| 1.0831| 1.07566| 1.08603| 1.12352| 1.12213| 1.12112| 1.26397| 1.26881| 1.26878| 1.30486| 1.2981| 1.30655| 1.34782| 1.34944| 1.36267| 1.39734| 1.39155| 1.39848| 1.43809| 1.47205| 1.51523| 1.59571| 1.73445| 1.95734| 2.19903| 2.53384| 2.96832| 3.55191| 3.99275| 4.44579|
| adp_gmbh| 0.127242| 0.133589| 0.13183| 0.169428| 0.170018| 0.171084| 0.212979| 0.210969| 0.214819| 0.360628| 0.360001| 0.362229| 0.401461| 0.401098| 0.401995| 0.4458| 0.443858| 0.444974| 0.489704| 0.49218| 0.491612| 0.624206| 0.631105| 0.649775| 0.683376| 0.68603| 0.6873| 0.724928| 0.720753| 0.719706| 0.766059| 0.772432| 0.774985| 0.901904| 0.902897| 0.912607| 0.947966| 0.957039| 0.958981| 1.0033| 0.996093| 1.01897| 1.05413| 1.04933| 1.05432| 1.09997| 1.08662| 1.0971| 1.13401| 1.13586| 1.14972| 1.28933| 1.28889| 1.26425| 1.30995| 1.31099| 1.31607| 1.36293| 1.38118| 1.37893| 1.44031| 1.42324| 1.41488| 1.48604| 1.50119| 1.57556| 1.62547| 1.76198| 1.99275| 2.26049| 2.5919| 3.01524| 3.7829| 4.33354| 4.6501|
| apache| 0.104288| 0.106623| 0.107395| 0.10848| 0.110654| 0.10847| 0.110349| 0.111359| 0.110696| 0.199274| 0.206004| 0.207887| 0.199791| 0.199003| 0.201523| 0.204292| 0.210133| 0.207666| 0.207643| 0.210515| 0.209012| 0.214904| 0.215002| 0.217897| 0.217167| 0.214033| 0.215789| 0.216849| 0.216884| 0.21476| 0.217909| 0.219497| 0.222528| 0.221792| 0.221502| 0.220333| 0.223607| 0.222275| 0.222856| 0.226889| 0.232531| 0.234887| 0.236683| 0.23255| 0.230161| 0.237214| 0.235447| 0.233633| 0.235131| 0.237912| 0.240579| 0.238938| 0.238356| 0.234998| 0.243556| 0.243254| 0.242625| 0.244309| 0.247333| 0.249769| 0.252251| 0.251904| 0.247577| 0.248731| 0.252018| 0.256907| 0.264891| 0.265502| 0.282466| 0.291381| 0.31357| 0.331672| 0.361769| 0.403792| 0.420596|
| arduino| 0.115372| 0.118168| 0.118756| 0.131066| 0.134544| 0.133744| 0.144271| 0.145656| 0.145933| 0.252076| 0.25256| 0.250973| 0.266703| 0.26846| 0.265649| 0.270357| 0.279013| 0.282938| 0.288152| 0.289346| 0.287034| 0.30095| 0.300641| 0.302165| 0.309388| 0.313887| 0.318836| 0.328115| 0.333636| 0.33308| 0.344963| 0.347169| 0.349579| 0.357129| 0.360751| 0.357386| 0.36758| 0.374876| 0.37501| 0.388219| 0.385996| 0.38728| 0.402264| 0.397484| 0.401264| 0.419189| 0.411927| 0.420777| 0.425124| 0.421949| 0.425691| 0.441285| 0.442723| 0.445475| 0.452583| 0.457608| 0.458356| 0.464984| 0.483976| 0.476059| 0.49327| 0.484892| 0.491934| 0.504778| 0.520724| 0.535165| 0.573262| 0.588302| 0.645813| 0.72615| 0.806305| 0.927964| 1.08856| 1.23818| 1.38486|
| daedalusalpha| 0.116095| 0.11624| 0.115009| 0.127643| 0.127093| 0.126963| 0.135694| 0.139437| 0.141273| 0.241843| 0.235674| 0.237743| 0.254238| 0.255376| 0.254676| 0.26798| 0.266026| 0.262657| 0.275831| 0.274235| 0.274027| 0.298792| 0.294136| 0.292795| 0.310018| 0.30536| 0.315293| 0.329029| 0.323969| 0.332235| 0.346309| 0.337657| 0.341622| 0.352733| 0.344123| 0.343924| 0.355808| 0.36872| 0.361384| 0.376003| 0.376866| 0.374248| 0.382123| 0.379085| 0.387614| 0.409449| 0.403527| 0.40974| 0.407215| 0.412223| 0.413713| 0.432982| 0.433979| 0.432586| 0.454692| 0.437569| 0.446818| 0.479942| 0.466144| 0.487547| 0.480369| 0.485757| 0.47991| 0.49613| 0.517664| 0.531082| 0.547008| 0.572627| 0.626837| 0.721285| 0.790924| 0.928976| 1.0619| 1.22611| 1.3799|
| elegantdice| 0.116554| 0.117027| 0.111865| 0.134046| 0.130376| 0.128702| 0.143619| 0.14691| 0.142034| 0.239217| 0.23856| 0.238209| 0.255523| 0.252011| 0.297958| 0.273507| 0.271737| 0.267585| 0.283008| 0.274183| 0.281932| 0.299973| 0.293346| 0.302665| 0.330338| 0.318726| 0.320722| 0.332404| 0.334214| 0.330577| 0.335391| 0.338962| 0.339268| 0.370267| 0.373674| 0.352719| 0.365658| 0.366428| 0.368443| 0.392659| 0.384055| 0.392099| 0.409311| 0.399807| 0.395054| 0.411748| 0.408118| 0.413592| 0.419899| 0.409236| 0.414143| 0.428171| 0.435336| 0.439593| 0.450396| 0.439422| 0.443769| 0.464921| 0.474579| 0.476022| 0.482618| 0.479466| 0.479828| 0.501581| 0.515545| 0.530507| 0.551744| 0.576458| 0.621519| 0.72233| 0.793575| 0.920026| 1.03968| 1.22077| 1.39227|
| internetsoftwareconsortium| 0.117588| 0.118736| 0.111479| 0.123797| 0.126256| 0.119238| 0.127073| 0.12859| 0.123023| 0.213933| 0.216462| 0.212099| 0.218711| 0.22538| 0.221344| 0.229031| 0.229932| 0.220187| 0.235869| 0.236724| 0.228343| 0.239638| 0.234517| 0.227541| 0.239294| 0.248072| 0.238767| 0.243867| 0.252164| 0.244748| 0.256164| 0.255318| 0.247219| 0.259892| 0.258947| 0.253099| 0.265885| 0.269323| 0.260065| 0.269539| 0.265481| 0.263481| 0.267779| 0.26499| 0.259639| 0.272041| 0.274656| 0.280423| 0.283917| 0.287777| 0.27783| 0.284992| 0.287749| 0.28589| 0.294823| 0.293906| 0.291126| 0.295149| 0.303882| 0.293558| 0.302823| 0.310879| 0.291479| 0.304038| 0.309971| 0.325926| 0.339315| 0.341971| 0.35886| 0.390464| 0.414406| 0.465176| 0.518701| 0.589259| 0.640349|
| jounimalinen| 0.11629| 0.116169| 0.11837| 0.122465| 0.121423| 0.120494| 0.123896| 0.123934| 0.125791| 0.207524| 0.206097| 0.204119| 0.217896| 0.214336| 0.213382| 0.210058| 0.212714| 0.217566| 0.214973| 0.213796| 0.21297| 0.219657| 0.223092| 0.222445| 0.221584| 0.221995| 0.222984| 0.222671| 0.226799| 0.223336| 0.224717| 0.225653| 0.225672| 0.227586| 0.228129| 0.226278| 0.226217| 0.236365| 0.232349| 0.232921| 0.233045| 0.22879| 0.236538| 0.231899| 0.232744| 0.233564| 0.24428| 0.249879| 0.244413| 0.245404| 0.24661| 0.247874| 0.26632| 0.251318| 0.247634| 0.247754| 0.251782| 0.26085| 0.254879| 0.25529| 0.255561| 0.263959| 0.254197| 0.260309| 0.263118| 0.270182| 0.274308| 0.278663| 0.284613| 0.30701| 0.326885| 0.345687| 0.366998| 0.410657| 0.426901|
| libb64| 3.38115| 3.42352| 3.37348| 3.34815| 3.37448| 3.39801| 3.45536| 3.40568| 3.39631| 3.49977| 3.91262| 3.6758| 3.58931| 3.52024| 3.4621| 3.50008| 3.46335| 3.49912| 3.55725| 3.52398| 3.53885| 3.5811| 3.55066| 3.53613| 3.64914| 3.66838| 3.63639| 3.64505| 3.76825| 3.72302| 3.6863| 3.63561| 3.64132| 3.7159| 3.75612| 3.66546| 3.70098| 3.68179| 3.68492| 3.79608| 3.75936| 3.75085| 3.73409| 3.7054| 3.76289| 3.83466| 3.79256| 3.79505| 3.95399| 3.9712| 3.94042| 3.86602| 3.97057| 3.91945| 3.98275| 4.00129| 3.97526| 3.99666| 3.96592| 3.98564| 4.04599| 4.0208| 3.89593| 3.91472| 3.91933| 3.99707| 4.29| 4.21984| 4.32704| 3.94423| 4.02118| 4.12138| 4.62752| 4.76545| 4.6542|
| libcurl| 0.348379| 0.386332| 0.403265| 0.636301| 0.675015| 0.676158| 0.89648| 0.933154| 1.05749| 1.28256| 1.30161| 1.31112| 1.52602| 1.59948| 1.60205| 1.81363| 1.85457| 1.84087| 2.07984| 2.16806| 2.13275| 2.34213| 2.39617| 2.40524| 2.66005| 2.6815| 2.66054| 2.87839| 2.92754| 2.93274| 3.14996| 3.19175| 3.15966| 3.44022| 3.48583| 3.44939| 3.66048| 3.70389| 3.72447| 3.9385| 4.04555| 3.93969| 4.25523| 4.25956| 4.21474| 4.53531| 4.50716| 4.54219| 4.70744| 4.79274| 4.78336| 5.00708| 5.04229| 5.01768| 5.33201| 5.27645| 5.26601| 5.46853| 5.5546| 5.57499| 5.822| 5.81977| 5.80494| 6.02185| 6.40262| 6.71829| 7.19685| 7.44321| 8.9684| 10.5076| 11.7751| 14.6306| 17.3215| 20.1283| 23.207|
| manuelmartinez| 0.104096| 0.105386| 0.105986| 0.116953| 0.120126| 0.120089| 0.13259| 0.130097| 0.131701| 0.242676| 0.244711| 0.238917| 0.255131| 0.251568| 0.256001| 0.265769| 0.265484| 0.263822| 0.282003| 0.276596| 0.27776| 0.395172| 0.397291| 0.393245| 0.403014| 0.40963| 0.409786| 0.419034| 0.418655| 0.419266| 0.43748| 0.435125| 0.431443| 0.542701| 0.547432| 0.5438| 0.559488| 0.555575| 0.559688| 0.587102| 0.587695| 0.582587| 0.591049| 0.599618| 0.611968| 0.621769| 0.618128| 0.611131| 0.618709| 0.609232| 0.619576| 0.730137| 0.731474| 0.724294| 0.748548| 0.748982| 0.734758| 0.750204| 0.754641| 0.760813| 0.776564| 0.762366| 0.769549| 0.780712| 0.802607| 0.812502| 0.834966| 0.940688| 1.01137| 1.1005| 1.30136| 1.44705| 1.69845| 1.85252| 1.99927|
| omnifarious| 0.101864| 0.105162| 0.108538| 0.114127| 0.116102| 0.118082| 0.122791| 0.124087| 0.214128| 0.218085| 0.218289| 0.221834| 0.227735| 0.229526| 0.236199| 0.237199| 0.241852| 0.241242| 0.250012| 0.251586| 0.254882| 0.260206| 0.260721| 0.262368| 0.266415| 0.266102| 0.270897| 0.275056| 0.278831| 0.279505| 0.287723| 0.288044| 0.288487| 0.29626| 0.295281| 0.300227| 0.304803| 0.303866| 0.319092| 0.318372| 0.324368| 0.327033| 0.33365| 0.334502| 0.333777| 0.336404| 0.344286| 0.344226| 0.359375| 0.350798| 0.35888| 0.36344| 0.363229| 0.36783| 0.366557| 0.373271| 0.376557| 0.381898| 0.3825| 0.388658| 0.389155| 0.394554| 0.396173| 0.407889| 0.417216| 0.450424| 0.447214| 0.459651| 0.523908| 0.575301| 0.64942| 0.736873| 0.840004| 0.959934| 1.03129|
| polfosol| 0.100393| 0.102252| 0.104527| 0.106852| 0.107842| 0.109625| 0.110403| 0.112726| 0.114017| 0.206899| 0.207848| 0.205844| 0.211961| 0.213909| 0.213849| 0.217181| 0.217388| 0.218222| 0.221148| 0.221284| 0.222617| 0.228993| 0.22833| 0.228596| 0.232133| 0.231344| 0.228534| 0.234951| 0.240723| 0.238799| 0.243641| 0.242595| 0.241328| 0.245467| 0.245948| 0.245106| 0.251065| 0.254134| 0.259194| 0.25963| 0.262415| 0.258526| 0.261802| 0.262795| 0.259435| 0.26584| 0.266826| 0.266727| 0.27172| 0.276499| 0.27564| 0.279711| 0.275745| 0.278954| 0.281675| 0.28153| 0.281084| 0.290845| 0.293486| 0.30554| 0.307793| 0.306473| 0.310123| 0.319684| 0.326312| 0.338339| 0.35194| 0.360072| 0.376104| 0.394344| 0.431485| 0.48089| 0.526716| 0.603774| 0.671293|
| user152949| 1.51134| 1.61904| 1.67032| 2.03524| 2.1049| 2.21951| 2.55933| 2.66274| 2.7889| 3.18413| 3.29005| 3.40633| 3.80087| 3.8372| 3.97358| 4.37285| 4.44842| 4.55678| 4.94208| 4.96559| 5.17154| 5.55087| 5.56711| 5.63591| 6.02147| 6.12577| 6.22616| 6.65593| 6.77919| 7.00893| 7.32389| 7.34578| 7.40697| 7.65052| 7.7581| 7.87752| 8.18053| 8.27316| 8.33729| 8.68615| 8.87835| 8.9414| 9.20125| 9.36439| 9.40324| 9.78983| 10.0875| 10.0769| 10.5214| 10.617| 10.7804| 11.1066| 11.2016| 11.3969| 11.5754| 11.8539| 11.9732| 12.2192| 12.1862| 12.4297| 12.6259| 12.9148| 12.8541| 13.301| 13.8008| 14.3918| 15.5416| 16.2443| 19.0699| 22.5877| 24.8871| 31.3145| 37.2057| 43.1374| 49.6723|
| wikibooks_org_c| 0.114006| 0.114376| 0.11299| 0.119155| 0.118291| 0.122523| 0.122706| 0.124014| 0.126402| 0.215603| 0.219059| 0.217351| 0.224996| 0.224489| 0.226631| 0.229461| 0.231936| 0.233208| 0.234421| 0.236356| 0.240123| 0.240656| 0.23738| 0.243606| 0.247441| 0.246319| 0.242923| 0.251543| 0.254154| 0.262311| 0.266362| 0.262248| 0.262594| 0.269071| 0.267895| 0.269202| 0.274931| 0.277233| 0.277054| 0.279441| 0.2688| 0.273519| 0.289263| 0.284602| 0.282418| 0.290387| 0.28766| 0.28724| 0.292823| 0.288887| 0.290636| 0.295239| 0.294369| 0.292266| 0.298768| 0.298137| 0.296012| 0.30878| 0.303891| 0.306948| 0.314033| 0.313339| 0.314376| 0.320162| 0.322938| 0.330717| 0.346275| 0.351606| 0.376893| 0.407226| 0.441518| 0.509046| 0.563567| 0.637282| 0.691647|
| wikibooks_org_cpp| 0.144213| 0.146629| 0.147858| 0.175964| 0.179018| 0.18618| 0.215937| 0.223115| 0.225969| 0.430226| 0.447034| 0.445014| 0.47286| 0.48427| 0.48352| 0.514986| 0.516739| 0.524396| 0.558306| 0.557655| 0.563375| 0.592889| 0.597609| 0.611094| 0.641835| 0.657562| 0.675007| 0.695273| 0.703914| 0.699327| 0.728545| 0.73004| 0.733179| 0.778718| 0.768151| 0.785034| 0.806497| 0.808572| 0.817688| 0.836858| 0.834362| 0.844736| 0.869771| 0.882243| 0.884719| 0.916048| 0.91318| 0.921752| 0.993757| 0.968024| 0.974655| 1.00692| 1.0081| 1.0252| 1.05121| 1.05677| 1.05513| 1.09003| 1.0798| 1.08559| 1.13966| 1.1318| 1.15107| 1.17487| 1.21812| 1.26759| 1.3272| 1.40078| 1.61577| 1.83743| 2.02324| 2.46498| 2.912| 3.32621| 3.78587|


![Performance 1 to 256 bytes_32bit_withcurl](https://github.com/gaspardpetit/base64/blob/master/doc/perf_1to256_all.png "")

libcurl and user152949 stands out, being slower by a factor of 5x or more than the others.  Here's the same graph without them:

![Performance 1 to 256 bytes_32bit_withcurl](https://github.com/gaspardpetit/base64/blob/master/doc/perf_1to256.png "")

libb64 seems to have a high fixed cost and a low variable cost - it may be that it will outperform other solutions with larger strings. However, here are results going up to 32K:

| Implementation | 32768|
|----|----|
| jounimalinen| 30.5788|
| apache| 31.6221|
| internetsoftwareconsortium| 54.9623|
| polfosol| 58.9534|
| wikibooks_org_c| 61.8934|
| omnifarious| 108.644|
| libb64| 146.305|
| elegantdice| 147.357|
| daedalusalpha| 149.064|
| arduino| 153.267|
| manuelmartinez| 157.84|
| wikibooks_org_cpp| 427.811|
| LihO| 488.674|
| adp_gmbh| 507.942|
| libcurl| 2906.98|
| user152949| 5752.37|

![Performance 32K](https://github.com/gaspardpetit/base64/blob/master/doc/perf_at32K.png "")

At 32K, it does not outperform the average performing solutions.

## Conclusion

- The Apache and the Internet Software Consortium versions, written over 15 years ago, beats most of the code snippets posted around - which brings us back to how it is important to look for existing implementations before writing new ones. The ISC implementation comes with an unconvenient license from IBM, however, granting you "immunity from suites under its patents, if any, for the use, sale or manufacture of produces to the extent that such products are used for performing Domain Name System";
- The libcurl implementation is really terrible;  Some other implementations are also terrible, the slower ones generally allocate memory dynamically as they convert, even though the output size is deterministic and can be preallocated;
- libb64 shows very strange performance results - I get the feeling that they are doing something neat but that I am perhaps not using their code right;
- A lot of implementations are available, everyone claims theirs is better. This test shows that unless you measure, you cannot make any claims about the performance of your code;
